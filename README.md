音频处理系统 v1.0  中文版说明书



    目录


    1  系统说明...........................................................2

    2  音频处理系统.......................................................2

        2.1	降噪系统主界面................................................2

        2.2	声源定位.....................................................3

        2.3	音频降噪.....................................................5

        2.4	音频录制.....................................................6

        2.5	音频编辑.....................................................7

        2.6 音频静音.....................................................7

        2.7 音频优化.....................................................8

        2.8	音频调节.....................................................8

        2.9	显示界面.....................................................9

        2.10播放界面.....................................................9

        2.11IO界面.......................................................9

    3	音频降噪数据库概念................................................10



1	系统说明

    随着科技水平的不断发展, 计算机技术也得到了长足的进步, 可以利用计算机存储、播放和处理数字化的音频素材, 克服了音频材料的连贯性、速度和音量等不易改变的弊端。通过利用计算机的数字处理技术, 能够有效的改善音频材料的音量、速度以及连贯性方面不易更改的缺陷的同时, 对于解决噪音处理、声源定位、音频优化也有着显著的效果。本系统主要使用了Noisereduce与acoular算法。
    Noisereduce是python中的一种降噪算法，它可以降低语音、生物声学和生理信号等时域信号中的噪声。它依赖于“spectral gating”的方法，这是噪声门（门处理器）的一种形式。它的工作原理是计算信号(可选的噪声信号)的频谱图，并为该信号/噪声的每个频带估计噪声阈值(或门)。该阈值用于计算一个掩码，它使噪声低于频率变化阈值。
    Acoular 是一个用于声学波束成形的 Python 模块，它是在声学测试中的应用。可以对麦克风阵列记录的多通道数据进行处理和分析，以生成声源分布的映射。然后可以使用地图（声学照片）来定位声源并使用笛卡尔二维网格图与光谱图表示。



2	音频处理系统


2.1	降噪系统主界面

    打开软件可以看到如图1.1所示的主界面。该界面包括音频文件模块、音频优化模块、音频编辑模块、编辑模块、录音模块、数据库处理模块、声源定位模块等。
    各个模块中有波形图，播放按钮，调音器，文件与文件夹输入框与按钮，音频文件打开与保存按钮，显示界面，音频编辑参数输入框与按钮，音频静音参数输入框与按钮，音频优化参数输入框与按钮，录音参数输入框与按钮，数据库降噪处理参数输入框与按钮，声源定位笛卡尔图与按钮。
    本系统的功能有声源定位、音频降噪、音频录制、音频编辑、音频编辑、音频优化、音频调节等。

![image](https://user-images.githubusercontent.com/107572639/216081779-3a747254-edea-4316-b182-5cbcb6d5ac6d.png

图1.1



2.2	声源定位

    此功能需要用户在“input”处选择录制的定位声源文件路径，在“output”处选择h5格式文件输出路径。
    在选择文件路径后，打开源码文件夹中的Mic.xml进行编辑，输入阵列麦克风的配置与位置信息。如图2.2所示

![image](https://user-images.githubusercontent.com/107572639/216113350-6323aa9e-6bc8-4014-bc89-1d014ccefeb8.png)

图2.2

    在配置完以上信息后，点击“location”按钮，系统会给出阵列麦克风定位图，如图2.3所示。并在“cartesianGrid”区域显示音频地图。如图2.4所示.

![image](https://user-images.githubusercontent.com/107572639/216113365-e7a05fc6-cceb-4449-921c-4355ec66b1d0.png)

图2.3

![image](https://user-images.githubusercontent.com/107572639/216113403-bd58e7a9-e779-4304-b6b6-c9f64d1ce145.png)

图2.4

    由图可以读出声源位置：

====== =============== ======

Source Location        Level

====== =============== ======

1      (-0.1,-0.1,0.3) 1.0 Pa

2      (0.15,0,0.3)    0.7 Pa

3      (0,0.1,0.3)     0.5 Pa

====== =============== ======



2.3	音频降噪

    此功能支持连接数据库，批量添加音频文件并进行降噪处理。需要用户配置数据库相关信息，并点击“config db”按钮进行配置。如图3.1所示，默认值为

主机名  host='localhost',

用户名 user='root',

密码 passwd='000000',

数据库名 dbname='music_wav',

端口 port=3306，

    输入成功后显示界面将会打印“Configure database music_wav successfully”

![image](https://user-images.githubusercontent.com/107572639/216113528-3e83325c-0f73-4edd-9f56-549944e9bc80.png)

图3.1

    在“table”输入框中输入导入音频文件表格名，如“music”，如果需要创建表格，则填入需要创建表格名，点击“create table”按钮，成功后显示界面会打印“Create table music successfully”
    配置完成后点击“input file”按钮，选择批量输入未降噪音频文件夹路径，再点击“output file”按钮， 选择已降噪音频输出文件夹路径。
    点击“insert”按钮，数据库的选中表格中将会导入音频，并在显示界面打印输入音频文件信息。成功后会打印“Complete insert”。如图3.2所示为数据库信息。

![image](https://user-images.githubusercontent.com/107572639/216113569-282f5d13-2ed4-4e41-81d1-0da65590af21.png)

图3.2（Navicat显示数据表）

    配置完成后点击“Denoise”，显示界面会显示:

Start denoise

demo.wav C:/Users/Corey/Music/music_demo/demo.wav

test (1).wav C:/Users/Corey/Music/music_demo/test (1).wav

test (2).wav C:/Users/Corey/Music/music_demo/test (2).wav

Finish process

    完成降噪处理的文件将会输出在已降噪音频并文件夹重新导入数据库。如图3.3所示。

![image](https://user-images.githubusercontent.com/107572639/216113751-90f3bdde-38ba-4754-b2f0-798f3b6d2140.png)

图3.3（Navicat显示数据表）


2.4	音频录制

    音频录制功能可以通过配置相关参数录制音频，可以与声源定位功能配合使用。
    此功能需要用户配置录制音频信息与麦克风信息。点击“Mic”按钮获麦克风数据：

Mic ID: 0 - Microsoft 声音映射器 - Input

Mic ID: 1 - 麦克风阵列 (适用于数字麦克风的英特尔® 智音技术)

    在录音模块中进行配置。如图4.1所示。默认值为：

麦克风 MicID=0, 

数据块 chunk=1024, 

声道数 channels=3, 

采样频率 rate=51200, 

录制时间 time=1, 

![image](https://user-images.githubusercontent.com/107572639/216113839-1eaa6c77-dff1-4cab-990f-5151735d4927.png)

图4.1

    配置完成麦克风与录制音频信息后点击“output”按钮配置导出音频路径。默认值为“output_demo.wav”。


2.5	音频编辑

    音频编辑功能可以编辑音频声道数量、采样频率和采样宽度。
    此功能需要用户配置音频编辑声道数量、采样频率和采样宽度（不配置则不编辑）。如图5.1所示。

![image](https://user-images.githubusercontent.com/107572639/216113901-6be176e5-33dd-4f07-a0e9-27e9f7cea9cc.png)

图5.1

    配置完成音频编辑信息后点击“input”按钮配置导入音频路径，点击“output”按钮配置导出音频路径。再点击“data”按钮查看音频信息并导入到系统。
    配置后点击“edit”按钮，系统将会编辑导入音频的音频声道数量、采样频率和采样宽度。
    最后点击“save”按钮输出到输出音频路径。


2.6	音频静音

    音频静音功能可以去除音频文件中的静音。
    此功能需要用户配置保留静音长度，静默认定时长和静音认定大小。如6.1所示。

![image](https://user-images.githubusercontent.com/107572639/216113958-42f1ced8-9484-4f7d-bc51-7567d02146ec.png)

图6.1

    配置完成音频静音信息后点击“input”按钮配置导入音频路径，点击“output”按钮配置导出音频路径。再点击“data”按钮查看音频信息并导入到系统。
    配置后点击“strip”按钮去除语音音频前后声音；点击“remove”按钮去除音频中的静音段；点击“split”按钮根据静音切分音频。
    最后点击“save”按钮输出到输出音频路径。


2.7	音频优化

    音频优化功能可以优化音频。
    此功能需要用户配置最大静音保留长度和音量大小，选择音频声音音量变化规则。如图7.1所示

![image](https://user-images.githubusercontent.com/107572639/216114035-2649b0bc-c22c-45d7-83ff-999c3fc2a958.png)

图7.1

    配置完成音频优化信息后点击“input”按钮配置导入音频路径，点击“output”按钮配置导出音频路径。再点击“data”按钮查看音频信息并导入到系统。
    配置后点击“mute”按钮优化音频静音片段；点击“volume”优化声音。
    最后点击“save”按钮输出到输出音频路径。


2.8	音频调节

    音频调节功能可以调节音频。
    此功能需要用户点击“input”按钮配置导入音频路径，点击“output”按钮配置导出音频路径。再点击“data”按钮查看音频信息并导入到系统。
    导入完成后通过调节调音器调节音频音高、语速、采样率、回声、低音、模糊、男音，突出高音或低音，成倍拉伸延长。如图8.1所示。默认值为：

音高 pitch：0

语速 speed：0

采样率 sample：1

回声 reback：1

音高及语速 pspeed：1

突出高低音 attent：0

男音 male：0

成倍拉伸 stretc： 1

模糊 vague：1

![image](https://user-images.githubusercontent.com/107572639/216114087-3d4dd21b-cc44-4355-a31f-08d4700ba41c.png)

图8.1

    最后点击“save”按钮输出到输出音频路径。


2.9	显示界面

    运行交互数据打印。如图9.1所示。

![image](https://user-images.githubusercontent.com/107572639/216114171-08982159-a94c-4741-b4d8-1f0b55590ec5.png)

图9.1


2.10 播放界面

    在点击“open”按钮后oscillogram界面会显示音频波形图。如图10.1所示。

![image](https://user-images.githubusercontent.com/107572639/216114224-780f0ed2-1765-43c3-9811-3c3ddbf7a983.png)

图10.1

    点击play自动播放音频。


2.11 IO界面

    输入输出文件与文件夹配置界面。点击“input”、“output”、“input file”、“output file”对文件与文件夹进行配置，或者在输入框中进行输入配置。如图11.1所示。

![image](https://user-images.githubusercontent.com/107572639/216114434-3b4066a2-6e16-4ec5-b77e-792effc0bcee.png)

图11.1

    点击“open”按钮会打开“input”配置的音频文件录入系统，并在显示界面与“oscillogram”打印信息。点击“save”按钮将保存音频文件至“output”配置的音频文件路径



3	数据库概念设计


3.1	未降噪文件实体

    未降噪文件表用于保存未降噪的文件信息，未降噪文件表用于保存为未降噪文件的ID，文件名，文件地址等。未降噪文件实体的实体图如图1.1所示。

![image](https://user-images.githubusercontent.com/107572639/216114509-c99ec82b-8f1d-4195-8c7c-79d08ed679d4.png)

图1.1 未降噪文件实体图


3.2	降噪文件实体

    已降噪文件表用于保存已降噪的文件信息，已降噪文件表用于保存为已降噪文件的ID，文件名，文件地址等。已降噪文件实体的实体图如图1.2所示。

![image](https://user-images.githubusercontent.com/107572639/216114596-7e98349b-c1d2-4c52-a296-6d7a6855a2f6.png)

图1.2 已降噪文件实体图

    Denoiser的全局E-R图如图1.3所示。

![image](https://user-images.githubusercontent.com/107572639/216114888-f20b68d3-e05f-466a-8b3f-ee63cae6e906.png)

图1.3 全局E-R图


3.3	数据库逻辑设计

    根据E-R图获得的逻辑结构如下：

未降噪文件（id, name, sites）

已降噪文件（id, name, sites）


3.4	数据库物理设计

    对数据库中各个表的说明如下：

（1）未降噪文件表

未降噪文件表用于存储未降噪文件，其表结构如表1.4所示。

字段名	数据类型	约束	主键	外键	说明

id	int(3)	非空	Yes	No	文件ID

name	varchar(255)	非空	No	No	文件名

sites	varchar(255)	非空	No	No	文件地址



（2）已降噪文件表

已降噪文件表用于存储已降噪文件，其表结构如表1.4所示。

字段名	数据类型	约束	主键	外键	说明

id	int(3)	非空	Yes	No	文件ID

name	varchar(255)	非空	No	No	文件名

sites	varchar(255)	非空	No	No	文件地址


3.5	实体图

    领域模型图如图1.5所示

![image](https://user-images.githubusercontent.com/107572639/216117770-2c29077d-41b0-4f6f-a283-835f6bb8e009.png)

图1.5领域模型图
